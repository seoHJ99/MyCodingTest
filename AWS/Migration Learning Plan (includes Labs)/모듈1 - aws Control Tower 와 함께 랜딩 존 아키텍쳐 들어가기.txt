-------------------------------------------------------
랜딩 존 아키텍처 설계 소개
단일 환경(계정) 탈피하기
계정구성 - 다양한 목적을 기반으로 계정에 워크로드를 그룹화
보안 및 규정 준수 - 보안제어 및 규정 준수 요구사항을 기반으로 계정을 분리
영향범위와 액세스 제한을 잘 고려


랜딩 존이 Well-Architected Framework에서 작동하는 방식
랜딩 존 : 잘 설계된 다중 계정 AWS 환경.
    - 다중 계정 아키텍처, IAM, 거버넌스, 관찰 기능, 데이터 보안, 네트워크 설계, 로깅을 시작할 수 있는 기준점


조직에서 간편하게 계정 관리
Organizations 를 이용하여 중아에서 다중 aws 계정을 통합 가능
Organizations :
    - 중앙ㅇ에서 리소스 프로비저닝
    - 서비스 제어 정책(spc)를 ou 또는 개별 계정에 적용하여 권한 정책을 적용
    - 계정간에 리소스 공유
    - 통합 결제


랜딩 존의 네트워킹
네트워킹 아키텍처를 안전하게 관리하고 제어하려면 전용 네트워킹 계정을 생성
이 계정은 트래픽을 수신하고 라우팅을 하는 허브 역할
네트워킹 연결 옵션은
    - direct connect
    - vpn (aws site-to-site vpn)
    - transit gateway(다중 계정, 인터넷, 온프레미스 연결 전반에서 네트워크 간의 라우팅 트래픽용 중심 허브 역할)
    - vpc 피어링
    - privateLink
transit gateway는 CIDR 이 중복되면 안됨.


랜딩 존의 통합 로깅
로그 아카이브 계정 : 랜딩존 전체에서 로그를 보관하는 전용 리포지토리 역할
감사 계정 : 랜딩존을 확인하고 감사. 모든 계정에 대한 읽기 전용 액세스 권한이 부여된 보안 ou 계정



----------------------------------------
AWS Control Tower의 개요, 이점, 아키텍처
AWS Control Tower: AWS에 다중 계정 환경을 설정하고 관리할 수 있는 간단한 방법을 제공
    - 하위에 Organizations, 다중 계정 전략이 존재
    - 리소스, 계정 관리가 편하고, 자동화에 이점이 있다.

사용 사례
1. 마이그레이션 및 현대화 준비
2. 규정 준수 aws 계정 프로비저닝
3. 제어를 통해 클라우드 정책 표시


----------------------------------------
AWS Control Tower의 아키텍처
1. 루트 : 랜딩존에 있는 모든 ou가 포함되어 있음. 루트는 ou가 아님. 삭제가 불가능. 모든 ou 및 계정 관리
2. IAM Identity center 디렉토리 : 각 IAM Identity center 사용자에 부여된 권한의 범위가 정의됨
3. IAM Identity center 사용자 : 랜딩존에서 aws 워크로드를 수행하기 위해 사용자가 맡을수 있는 자격증명
4. 감사 계정 : 모든 계정에 대한 읽기 전용 액세스 권한을 가짐. 계정간 액세스 구성.
    - 모든 계쩡에 대한 읽기 및 쓰기 액세스 권한을 부여하도록 설계된 제한된 계정


-------------------------------------
계정
관리 계정, 로그 아카이브 계정, 감사 계정



----------------------------------------
제어의 작동 방식
구현
    - AWS Organizations 서비스 제어 정책(SCP)
    - AWS Config 규칙
    - AWS CloudFormation Hooks
제어의 3동작
    예방 : 승인되지 않은 액세스나 변경사항이 발생하는 것을 막음. 다중 계정 환경에서 규정을 준수하도록 관리.
    감지 : 이벤트를 감지, 로깅하는 목적. 알림은 Control Tower 대시보드에 표시. AWS Control Tower에서 지원되는 AWS 리전에만 적용.
    사전 예방 :  리소스가 회사의 정책 및 목적 관련 규정을 준수하는지 스캔한 다음, 계정에 리소스를 프로비저닝.


제어의 지침
    필수 : 기본적으로 활성화되어 모든 ou에 적용. 끌수 없음
    적극 권장 :  AWS Control Tower 콘솔을 통해 회사의 재량에 따라 구현
    선택 : AWS 기업 환경에서 일반적으로 제한되지만 모든 랜딩 존에서는 필요하지 않을 수 있는 작업을 추적하거나 제재


--------------------------------------------
AWS Control Tower와 다른 AWS 거버넌스 서비스 통합

AWS Control Tower가 생성하는 ou
    - 루트 : 모든 ou및 계정을 호스팅하도록 설계된 상위 ou
    - 보안 : 로그 아카이브 계정과 감사 계정은 자동 할당
    - 샌드박스 : 기본 ou와는 별개. 랜딩존 설정시 생성.


SCP를 사용한 예방 제어
예방 제어는 SCP를 사용하여 특정 정책을 적용함으로써 특정 서비스와 AWS 리전을 제한


IAM Identity Center(이전 명칭: AWS Single Sign-On)
다중 AWS 계정 및 애플리케이션에 액세스하는 것을 한곳에서 관리
클라우드 네이티브 디렉터리를 배포하여 사용자 및 그룹을 생성 및 관리.
디렉터리는 홈 리전에 배포
다른 자격 증명 소스를 사용하고 있는 경우 Active Directory 또는 외부 자격 증명 공급자(IdP)로 변경

사용자 그룹 : 그룹 수준에서 권한을 할당. 해당 사용자에게 할당된 권한은 삭제.


Service Catalog
일반적인 IT 서비스를 관리 및 배포. 서비스에서 생성 및 관리되는 승인된 제품을 프로비저닝

Account Factory :단일 위치에서 랜딩 존에 배포하고자 하는 계정을 프로비저닝, 업데이트, 관리
    -  한번에 최대 계정 5개까지 생성
    - 생성된 계정에 적용할 OU 및 제어를 선택

AWS Config
랜딩 존 전반에서 리소스 구성을 관리할 수 있는 방법을 지원
    - AWS Config 규칙의 형태로 몇 가지 필수 감지 제어를 적용
    - COMPLIANT : 규칙이 규정에 부합
    - NON_COMPLIANT : 규칙이 규정에 위반
    - ERROR : 파라미터가 유효하지 않거나, 유형이 잘못되거나, 형시이 틀림
    - NOT_APPLICABLE : 규칙 로직을 리소스에 적용 불가


CloudFormation
AWS 인프라 배포를 생성하고 프로비저닝할 수 있는 IaC를 제공
AWS Control Tower의 기본 구성 요소
JSON이나 YAML 중 하나를 사용해 선언형 언어로 리소스를 설명
    - AWS Control Tower는 기본 CloudFormation 스택을 배포
    - StackSets는 여러 CloudFormation 스택으로 구성되어 스택을 확장. 다른 리전이나 계정에서 호스팅되는 여러 CloudFormation 스택을 관리.


CloudFormation Hooks를 사용한 사전 예방 제어
사전 예방 검증: 프로비저닝하기 전에 규정 비준수 리소스를 식별
자동 적용: AWS 계정에 적용을 반영해 CloudFormation에서 규정 비준수 리소스가 프로비저닝되지 않도록 방지


CloudWatch
모니터링 서비스

CloudTrail
CloudTrail은 조직 수준에서 설정되며, 조직의 계정에서 발생하는 모든 이벤트를 로깅
api 호출 로그를 기록
모든 로그는 s3버킷의 로그 아카이브 계정에 전송 통합
