----------------------------------------
모니터링

CloudWatch Logs : 지표에 대한 로그파일을 생성
CloudTrail : api 사용량 추적
vpc 로그 : ip 트래픽 로그 추적

CloudTrail : 대부분의 aws api 호출과 그 응답을 기록함.
vpc 흐름로그 :
    - eni 와 결함하여 작동함. 
    - 흐름 시작, 끝, 프로토콜 정도만 기록함
CloudWatch: 지표 및 로그를 거의 실시간으로 수집
    - 성능에 대한 지표를 시각화
    - logs 라는 기능이 있음. 다른 소스에서 로그파일을 모니터링, 저장 엑세스 하는데 사용


-------------------------------------
경보 및 이벤트
CloudWatch 경보
지표를 기준으로 경보를 생성함
1. ok : 임계값을 통과하지 않음
2. Alarm : 임계값 초과함
3. iNSUFFICIENT DATA : 정보 부족

Amazon EventBridge
메시지를 보내 환경에 대응. 즉, 함수를 시작하거나 작업을 시작함
상태정보를 저장함.



-------------------------
로드밸런싱

Elastic Load Balancing(ELB)
여러 대상에 자동으로 트래픽 분산
고가용성 제공
1. ALB(7계층)   2. NLB(4계층)   3.GLB(3계층)   가 존재
1. ALB
    - url 을 이용해서 나눌수 있음.
    - 인스턴스 수준에서 나눌수 있음.
    - 오버헤드가 많은 대신 기능이 많음

2. NLB
    - 포트를 기반으로 나눌수 있음
    - 서브넷 수준에서 나눌수 있음

3. GLB
    - 라우팅 테이블을 이용해서 나눔
    - vpc 수준에서 나눌수 있음



----------------------------
자동 크기 조정
Auto Scaling
필요할때 인프라가 추가되고 필요없으면 인프라가 축소되는 기능
로드 밸런서와 결합되어 사용 가능.
시작 템플릿 : 어떤 리소스가 필요한지
    - 시작될 인스턴스에 대한 섲렁 
Auto Scaling 그룹 : 리소스가 필요한 위치와 크기
    - 오토 스케일링을 원하는 그룹과 서브넷
Auto Scaling 정책 : 리소스가 언제 시작되고, 언제동안 실행될지
    - 실행 조건
CloudWatch 경보를 이용하여 사용 가능

1. 예약하여 사용
2. 동적으로 지표 등을 감시하여 사용
3. 예측. 기계 학습 등으로 패턴을 분석하여 알아서 조정

비용
스팟 인스턴스나 saving plans 를 활용하여 비용 절감 가능



