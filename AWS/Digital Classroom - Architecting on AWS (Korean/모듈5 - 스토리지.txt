-----------------
스토리지 서비스
블록, 파일, 객체로 나뉨
블록 : 블록 단위로 데이터를 저장. 더 원시적이고 작은 단위로 데이터를 다룸
파일 : 중간 수준에서 저장. 원시 스토리지에 접근x.
객체 : 데이터를 객체 단위로 가상 컨테이너에 저장한다.


--------------------
Amazon S3
버킷에 객체를 저장함. 리전 레벨 서비스.
99.999999999 내구성
백업 및 복원 데이터, 분석용 데이터 레이크, 아카이빙, 미디어 스토리지 등에 적절
버킷 : 객체가 저장되는 공간. 전역적으로 고유해야 함. 계정마다 최대 100개
객체 : 저장되는 데이터. 개별적으로 5t 가 최대이고 사실상 무제한으로 저장 가능
객체키 : 접두사와 파일 이름이 추가된 url


-------------------------
객체 보호
기본적으로 데이터는 비공개. 버킷 정책을 지정하는 식으로 공개 가능.
s3 액세스 제어 목록(acl): 이는 객체 단위이기에 많은 객체를 제어하기에 힘듬
    -세분화된 기능
버킷 정책 : iam 정책과 유사한 json 문서
    - principal : 누구에게 이 권한을 수행할지 결정함.
    - Action : 권한
    - resource : 어떤 버킷인지

s3 퍼블릭 액세스 차단


s3 액세스 포인트 생성 가능
고유한 정책을 만들어 특정 버킷에만 접근하도록 설정 가능

데이터 암호화
저장 중 암호화 : 저장되는 데이터가 암호화됨.
전송 중 암호화 : 전송중인 데이터가 ssl 암호화가 됨
저장 데이터 암호화를 위해 s3 관리형 키를 생성하거나, kms 에서 관리 가능.
사용자가 직접 관리해도 됨



------------------------
객체 저장
standard :  자주 액세스하는 활성 데이터
standard-IA: 주자 엑세스 하지 안흔ㄴ 데이터
One Zone-IA: 재생성 가능하고 엑세스 빈도가 낮은 데이터
             --
Glacier Instant Retrieval: 밀리초 내에 복원. 빠르게 복원이 필요한 데이터
Glacier flexible Retrieval: 복원시간 몇분 ~ 몇시간. 복원 필요성을 예측할수 없는 데이터
Glacier Deep Archive: 보원시간 12시간 이내. 복원 가능성이 없는 아카이브

아래로 올수록 비룡이 저렴하고 조회 시간이 느려짐.
S3 Intelligent-Tiering : 객체 엑세스 패턴을 모를때 데이터를 유연하게 자동으로 이동하는 등급.
Glacier 을 사용하면 값싸고 기존 s3 의 이득을 모두 사용 가능.

기본적으로 s3 는 덮어씀. 따라서 이전 버전이 필요하면 버전관리 설정을 해야함.
수명 주기 정책을 통해 다른 스토리지 등급으로 전환할수 있음.

객체복제
교차리전 복제를 통해 여러 리전에 데이터를 복제할수 있음

--------------------
Amazon S3의 추가기능
s3 이벤트 알림
이벤트가 발생할때 전송되는 알림. 람다에 사용가능

멀티파트 업로드
여러 쓰레드로 객체를 나눠서 병렬로 업로드 가능. 멈췄다 다시 시행도 가능.
sdk 를 이용해 쓰레드 숫자를 고를수 있지만 콘솔로는 불가능.

transfer acceleration
데이터 장거리 이동을 빠르게 수행 가능.
아마존 네트워크를 사용하여 업로드



-------------------
공유 파일 시스템
EFS / FSx
안전하고 확장 가능한 파일 기반 스토리지
여러 인스턴스에서 동일한 스토리지 사용 가능

EFS: vpc 에 위치하며 NFSv4 프로토콜 사용. 마이그레이션에도 사용.
프로비저닝없이 자동 확장 축소.

FSx
aws 에서 windows file server, lustre 등을 관리하는 파일 시스템
업계 표준 기술을 사용하여 aws 에서 고성능 파일 시스템을 다루는 서비스




----------------------
데이터 마이그레이션 도구
온라인
storage gateway
지연시간이 짧은 액세스 제공.
S3, FSx 등을 이용하여 저장.

dataSync
TLS 기반으로 암호화 및 전송.
아마존 스토리지 서비스에서 이것을 읽을수 있음

Transfer Family


오프라인
snow Family
PB 단위의 거대한 데이터를 옮기기 위해 사용
경우에 따라 내부의 코드도 실행 가능