----------------------
데이터 베이스 서비스
rds
관계형 데이터베이스 서버를 클라우드 식으로 바꿈
aurora
aws 전용 db
redshift
대규모 데이터 웨어하우징에 특화된 서비스
              --
DynamoDB
키-값으로 이뤄진 쉽게 사용 가능한 no sql 디비
ElastiCashe
캐시를 프로비저닝 가능. db 를 캐싱해 속도를 높임

관계형은 엄격하게 관리. 그렇기에 복잡한 자료에 적합
no sql 은 빠른 대신 느슨하게 관리



-----------------------------
Amazon RDS
클라우드에서 관계형 데이터베이스를 편하게 사용하는 서비스
저장 데이터 암호화와 전송 데이터 암호화 지원
다른 가용 영역에 읽기 전용 목적 복제본 생성 가능
백업 및 복구 기능 제공
6개의 db를 제공.

다중 az에 배포하여 안정성 제공. 프라이머리 db 가 망가지면 세컨더리가 프라이머리로 승격됨. 동시에 새로운 세컨더리가 다른 가용영역에 생성됨.

읽기 전용 복제본
읽기 요청이 많은 경우 쓰로틀링이 안걸림
다른 리전에 배치할수 있어 더 빠른 속도 보장.

저장 데이터 암호화
kms를 사용하여 암호화.
업계 표준 aes-256 를 이용하여 암호화

aurora
my sql 과 postgre sql 과 호환. 완전 관리형.
6개의 복사본을 3개의 가용영역에 복제
지속적으로 s3에 백업.
컴퓨팅 노드와 db 볼륨이 분리되어 있어서 복제되어 관리.
읽기 전용 복제본 최대 15개 생성 가능

aurora serverless v2
자동으로 용량을 늘리거나 줄임.



------------------------------
Amazon DynamoDB

완전 관리형 nosql 데이터 베이스
비용 효율적
자동 확장
이벤트 중심의 프로그래밍 지원
키-값 데이터가

단순 키본키(파티션 키)는 고유값.그러나 정렬키가 존재하면 같을수 있음.
이때는 정렬키가 달라야 함.
정렬키를 이용해 다양한 쿼리 기능 사용 가능

읽기 및 쓰기 단위로 요금을 구매해야 함

일반적으로 1초에 3개의 가용영역에 걸쳐 테이블 데이터 복제
최종적 읽기 일관성 : 0.5단위로 읽으며 데이터 수정본이 적용되지 않을수도 있음
강력한 ㅇ릭기 일관성 : 1단위로 읽으며 데이터 일관성이 보장됨

글로벌 테이블
다중 리전의 글로벌 테이블. 리전간 복제를 자동화.
모든 리전에 변경사항을 적용한 복제본 저장



-----------------------------------
데이터베이스 캐싱

쿼리 속도가 느리고 비용이 많이 들거나 자주 액세스 되는 데이터 캐싱.
자주 변하지 안흔 데이터도 캐싱.

인메모리 데이터베이스.
캐싱전략
1. 레이지 로딩
    - 캐시서버에 요청
    - 캐시 미스가 나면 db 에서 데이터를 가져오고 캐시에 저장
    - 필요한 데이터만 저장함으로 효율적
    - 그러나 캐싱되어 있지 않으면 느림
    - 최종적 일관성이룻 있음

2. 라이트 스루
    - db 에 저장할때 캐싱도 함
    - 대신 캐싱 데이터가 너무 많아짐

캐시 보유 시간 정해야함. TTL을 정해주면 좋음

ElastiCashe 는 redis 와 memcached 와 호환됨.
memcached : 단순성. 멀티쓰레드
redis : 고급 데이터 유형 지원. 복잡. 백업, 복원 지원

DynamoDB Accelerator(DAX) : 빠른 응답시간을 위해 인메모리 성능을 제공하는 DynamoDB 와 호환되는 캐싱 서비스



-------------------------------
데이터베이스 마이그레이션 도구

Database Migration Service
온프레미스 -> 클라우드,  db-> db 간의 마이그레이션 지원
snowball 엣지 디바이스를 마이그레이션 대상으로 사용 가능

원본 데이터의 형식을 자동으로 변환.
다른 데이터로 변환하여 스키마 변환이 필요한 경우엔 Schema Conversion Tool(SCT) 를 이용해 마이그레이션 가능.
프로시저도 포함.
자동 변환되지 않으면 수동으로 해줘야 함.